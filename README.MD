# Self-Balancing Robot

## Project Overview

This project is a self-balancing robot that uses an Arduino Nano, an L298 motor driver, and an IMU sensor. The robot maintains its balance by continuously adjusting the motor speeds based on the tilt angle, which is measured by the IMU sensor. A PID controller is implemented to ensure stable and responsive control.

## Components Used

### 1. Arduino Nano
- **Role**: Acts as the main controller of the robot.
- **Specifications**: 
  - Microcontroller: ATmega328P
  - Operating Voltage: 5V
  - Input Voltage: 7-12V
  - Digital I/O Pins: 14 (6 PWM outputs)
  - Analog Input Pins: 8

### 2. L298 Motor Driver Bridge
- **Role**: Controls the motors based on the PWM signals from the Arduino Nano.
- **Specifications**:
  - Dual H-Bridge Motor Driver
  - Operating Voltage: 5V to 35V
  - Current: 2A per channel
  - Control Pins: 4 (IN1, IN2 for motor A; IN3, IN4 for motor B)

### 3. IMU Sensor (MPU6050)
- **Role**: Measures the tilt angle of the robot using accelerometer and gyroscope data.
- **Specifications**:
  - Accelerometer Range: ±2g, ±4g, ±8g, ±16g
  - Gyroscope Range: ±250, ±500, ±1000, ±2000 °/s
  - Communication: I2C

## Circuit Diagram

Here's a basic connection overview:
- **Arduino Nano**:
  - `D7, D6` connected to `IN1, IN2` of the L298 for the left motor.
  - `D8, D12` connected to `IN3, IN4` of the L298 for the right motor.
  - `D9` connected to `ENA` of the L298 (PWM for the left motor).
  - `D10` connected to `ENB` of the L298 (PWM for the right motor).
  - `A4 (SDA)`, `A5 (SCL)` connected to the IMU sensor for I2C communication.
- **L298 Motor Driver**:
  - Connect the power supply to the `VCC` and `GND` terminals.
  - Connect the motors to the `OUT1`, `OUT2` and `OUT3`, `OUT4` terminals.
  
## Software

### Dependencies
- **MsTimer2**: For handling timer interrupts on the Arduino Nano.
- **MPU6050**: For interfacing with the IMU sensor.

You can install these libraries via the Arduino Library Manager.

### Code Overview
The code implements a PID controller and a Kalman filter to process the sensor data and control the motors. The main functions include:
- **angle_calculate()**: Computes the tilt angle using accelerometer and gyroscope data.
- **Kalman_Filter()**: Applies the Kalman filter to smooth out the angle measurements.
- **PD()**: Implements the PD control loop for balancing.
- **speedpiout()**: Controls the speed of the motors based on the robot's tilt and movement.

### Usage
1. **Wiring**: Connect all components as per the circuit diagram.
2. **Upload Code**: Upload the provided code to the Arduino Nano using the Arduino IDE.
3. **Power the System**: Provide appropriate power to the Arduino Nano and the L298 motor driver.
4. **Testing**: Monitor the serial output to debug and observe the robot's behavior.

## Troubleshooting

- **Robot Not Balancing**: Check the IMU sensor orientation and verify the wiring connections.
- **Motors Not Responding**: Ensure that the motor driver is powered and that the PWM signals are being correctly generated by the Arduino.
- **Instability**: Adjust the PID controller parameters (`kp`, `ki`, `kd`) to achieve a stable balance.

## License

This project is open-source and is licensed under the MIT License. Feel free to modify and distribute the code and schematics as you see fit.

## Acknowledgments

- Special thanks to the open-source community for providing libraries and resources that made this project possible.
